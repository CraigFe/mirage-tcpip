<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tcp__Keepalive (tcpip.Tcp__Keepalive)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">tcpip</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Tcp__Keepalive</span></h1></header><p>TCP keepalives.</p><p>A TCP implementation may send &quot;keep-alives&quot; (empty TCP ACKs with the
sequence number set to one less than the current sequence number for
the connection) in order to provoke the peer to respond with an ACK
of the current sequence number. If the peer doesn't recognise the
connection (e.g. because the connection state has been dropped) then
it will return a RST; if the peer (or the network in-between) fails
to respond to a configured number of repeated probes then the
connection is assumed to be lost.</p><div class="spec type" id="type-action"><a href="#type-action" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>action</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-action.SendProbe" class="anchored"><td class="def constructor"><a href="#type-action.SendProbe" class="anchor"></a><code><span class="keyword">| </span></code><code>`SendProbe</code></td></tr><tr id="type-action.Wait" class="anchored"><td class="def constructor"><a href="#type-action.Wait" class="anchor"></a><code><span class="keyword">| </span></code><code>`Wait<span class="keyword"> of </span>Duration.t</code></td></tr><tr id="type-action.Close" class="anchored"><td class="def constructor"><a href="#type-action.Close" class="anchor"></a><code><span class="keyword">| </span></code><code>`Close</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>An I/O action to perform</p></div></div><div class="spec type" id="type-state"><a href="#type-state" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>state</code><code></code><code></code></div><div class="doc"><p>State of a current connection</p></div></div><div class="spec val" id="val-alive"><a href="#val-alive" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>alive : <a href="index.html#type-state">state</a></code></div><div class="doc"><p>An alive connection</p></div></div><div class="spec val" id="val-next"><a href="#val-next" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>next : configuration:Mirage_protocols.Keepalive.t <span class="keyword">&#8209;&gt;</span> ns:int64 <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-action">action</a><span class="keyword"> * </span><a href="index.html#type-state">state</a></code></div><div class="doc"><p><code class="code">next ~configuration ~ns state</code> returns the action we should take given
that we last received a packet <code class="code">ns</code> nanoseconds ago and the new state
of the connection</p></div></div><div class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/index.html#argument-1-T">T</a> : Mirage_time_lwt.S) -&gt; <span class="keyword">functor</span> (<a href="Make/index.html#argument-2-Clock">Clock</a> : Mirage_clock.MCLOCK) -&gt; <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div></body></html>