<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Marshal (tcpip.Ipv4_packet.Marshal)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">tcpip</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Ipv4_packet.Marshal</span></h1></header><div class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>error</code><code><span class="keyword"> = </span>string</code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-protocol_to_int"><a href="#val-protocol_to_int" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>protocol_to_int : <a href="../index.html#type-protocol">protocol</a> <span class="keyword">&#8209;&gt;</span> Cstruct.uint16</code></div><div class="doc"></div></div><div class="spec val" id="val-pseudoheader"><a href="#val-pseudoheader" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pseudoheader : src:Ipaddr.V4.t <span class="keyword">&#8209;&gt;</span> dst:Ipaddr.V4.t <span class="keyword">&#8209;&gt;</span> proto:[&lt; `TCP | `UDP ] <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> Cstruct.t</code></div><div class="doc"><p><code class="code">pseudoheader src dst proto len</code> constructs a pseudoheader, suitable for inclusion in transport-layer checksum calculations, including the information supplied. <code class="code">len</code> should be the total length of the transport-layer header and payload.</p></div></div><div class="spec val" id="val-into_cstruct"><a href="#val-into_cstruct" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>into_cstruct : payload_len:int <span class="keyword">&#8209;&gt;</span> <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> Cstruct.t <span class="keyword">&#8209;&gt;</span> (unit, <a href="index.html#type-error">error</a>) Pervasives.result</code></div><div class="doc"><p><code class="code">into_cstruct ~payload_len t buf</code> attempts to write a header representing <code class="code">t</code> (including
<code class="code">t.options</code>) into <code class="code">buf</code> at offset 0.
If there is insufficient space to represent <code class="code">t</code>, an error will be returned.</p></div></div><div class="spec val" id="val-make_cstruct"><a href="#val-make_cstruct" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>make_cstruct : payload_len:int <span class="keyword">&#8209;&gt;</span> <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> Cstruct.t</code></div><div class="doc"><p><code class="code">make_cstruct ~payload_len t</code> allocates, fills, and returns a buffer
repesenting the IPV4 header corresponding to <code class="code">t</code>.
If <code class="code">t.options</code> is non-empty, <code class="code">t.options</code> will be
concatenated onto the result. A variable amount of memory (at least 20 bytes
for a zero-length options field) will be allocated.
Note: no space is allocated for the payload.</p></div></div></body></html>